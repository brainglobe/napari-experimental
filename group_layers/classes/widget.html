<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>The GroupLayerWidget &#8212; napari-experimental  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=12dfc556" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="GroupLayers and GroupLayerNodes" href="group_layer_and_nodes.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="the-grouplayerwidget">
<h1>The <code class="docutils literal notranslate"><span class="pre">GroupLayerWidget</span></code><a class="headerlink" href="#the-grouplayerwidget" title="Link to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">GroupLayerWidget</span></code> instance is the parent of everything concerning the plugin.
It contains the <code class="docutils literal notranslate"><span class="pre">GroupLayer</span></code> data structure which informs the corresponding model and view, a reference to the standard <code class="docutils literal notranslate"><span class="pre">LayerList</span></code> (through it’s <code class="docutils literal notranslate"><span class="pre">.global_layers</span></code> property), and is responsible for linking relevant events.</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#linking-events-back-to-the-main-layerlist" id="id1">Linking Events Back to the Main <code class="docutils literal notranslate"><span class="pre">LayerList</span></code></a></p></li>
<li><p><a class="reference internal" href="#debugging" id="id2">Debugging</a></p></li>
<li><p><a class="reference internal" href="#api-reference" id="id3">API Reference</a></p></li>
</ul>
</nav>
<section id="linking-events-back-to-the-main-layerlist">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Linking Events Back to the Main <code class="docutils literal notranslate"><span class="pre">LayerList</span></code></a><a class="headerlink" href="#linking-events-back-to-the-main-layerlist" title="Link to this heading">¶</a></h2>
<p>A number of the widget’s functions and interactions with the event system are in place to ensure that the standard <code class="docutils literal notranslate"><span class="pre">LayerList</span></code> and the corresponding <code class="docutils literal notranslate"><span class="pre">GroupLayer</span></code> data structure do not go out of sync, as the napari viewer still uses the <code class="docutils literal notranslate"><span class="pre">LayerList</span></code> ordering to render the display.
As such, whilst the intention is that the user will not interact with the standard <code class="docutils literal notranslate"><span class="pre">LayerList</span></code> controls whilst using this plugin, the necessary functionality is there to ensure that anything they do does not introduce any breakages or inconsistencies:</p>
<ul class="simple">
<li><p>Adding a new layer via the <code class="docutils literal notranslate"><span class="pre">LayerList</span></code> will result in it appearing in the <code class="docutils literal notranslate"><span class="pre">GroupLayer</span></code> view. Note that the new item in the <code class="docutils literal notranslate"><span class="pre">GroupLayer</span></code> tree will be placed in a position consistent with the ordering of the <code class="docutils literal notranslate"><span class="pre">LayerList</span></code>.</p></li>
<li><p>Deleting a layer from either view will remove the corresponding item from the other.</p></li>
<li><p>Re-ordering layers in the <code class="docutils literal notranslate"><span class="pre">GroupLayer</span></code> view will cause the <code class="docutils literal notranslate"><span class="pre">LayerList</span></code> to reorder, in turn updating the view. Note that the converse direction does not have changes applied, since there is an ambiguity when applying a reordering that does not care for the group structure.</p></li>
</ul>
<p>If this plugin gets incorporated into core napari, these functions will become obsolete since the plugin will replace the standard <code class="docutils literal notranslate"><span class="pre">LayerList</span></code> display.
The underlying <code class="docutils literal notranslate"><span class="pre">LayerList</span></code> will need to be preserved to store the <code class="docutils literal notranslate"><span class="pre">Layer</span></code>s themselves, but the user will no longer be able to interact with it.</p>
</section>
<section id="debugging">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Debugging</a><a class="headerlink" href="#debugging" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">tests/blobs.py</span></code> file in the repository contains a script that starts a napari instance with a few layers populated, and the plugin activated;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">import</span> <span class="nn">napari</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">data</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;ALLOW_LAYERGROUPS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

<span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">blobs</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">binary_blobs</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">volume_fraction</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">n_dim</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">viewer</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">Viewer</span><span class="p">(</span><span class="n">ndisplay</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="n">pl</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">Points</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">face_color</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
<span class="n">il</span> <span class="o">=</span> <span class="n">napari</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">blobs</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">translate</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>

<span class="n">viewer</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">pl</span><span class="p">)</span>
<span class="n">viewer</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">il</span><span class="p">)</span>

<span class="n">dock_widget</span><span class="p">,</span> <span class="n">plugin_widget</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">add_plugin_dock_widget</span><span class="p">(</span>
    <span class="s2">&quot;napari-experimental&quot;</span><span class="p">,</span> <span class="s2">&quot;Show Grouped Layers&quot;</span>
<span class="p">)</span>

<span class="n">napari</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Running this script using a debugger will allow you to place breakpoints in your code for testing features that you are adding or changing.
Additionally, the plugin still retains its “enter debugger” button and corresponding function (<code class="docutils literal notranslate"><span class="pre">GroupLayerWidget._enter_debug</span></code>) which can have a breakpoint placed within it to allow you to enter a debug context with the widget as <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>If you are using VSCode, you can add the following configuration to your <code class="docutils literal notranslate"><span class="pre">launch.json</span></code> to launch the script above in the integrated debugger:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;configurations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Python Debugger: Blobs.py&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;debugpy&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;request&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;launch&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;program&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tests/blobs.py&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;console&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integratedTerminal&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;justMyCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="api-reference">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">API Reference</a><a class="headerlink" href="#api-reference" title="Link to this heading">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">napari-experimental</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Group Layers</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../implementation.html">Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#ethos-and-outlook">Ethos and Outlook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#todo">Todo</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Group Layers</a><ul>
  <li><a href="../implementation.html">Implementation</a><ul>
      <li>Previous: <a href="group_layer_and_nodes.html" title="previous chapter"><code class="docutils literal notranslate"><span class="pre">GroupLayer</span></code>s and <code class="docutils literal notranslate"><span class="pre">GroupLayerNode</span></code>s</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Alessandro Felder, William Graham, Kimberly Meechan.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../_sources/group_layers/classes/widget.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>